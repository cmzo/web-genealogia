<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Árbol Simple</title>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #tree {
            width: 100%;
            height: 600px;
            border: 1px solid #ccc;
        }
        .node {
            cursor: pointer;
        }
        .node text {
            font-size: 12px;
        }
        .link {
            fill: none;
            stroke: #999;
            stroke-width: 1px;
        }
    </style>
</head>
<body>
    <h1>Árbol Genealógico Simple</h1>
    <div id="tree"></div>
    
    <script src="data/arbol.js"></script>
    <script>
        console.log('Datos cargados:', window.FAMILY_TREE);
        
        // Datos de prueba
        const data = window.FAMILY_TREE || {
            name: "Francisco Clemenzo",
            children: [
                { name: "Maria Luisa" },
                { name: "Felix" },
                { name: "León" },
                { name: "Pedro" },
                { name: "Carlota" }
            ]
        };
        
        console.log('Datos a usar:', data);
        
        // Configuración
        const width = 800;
        const height = 500;
        
        // Crear SVG
        const svg = d3.select("#tree")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        
        // Crear jerarquía
        const root = d3.hierarchy(data);
        console.log('Jerarquía creada:', root);
        
        // Layout del árbol
        const treeLayout = d3.tree()
            .size([width - 100, height - 100]);
        
        treeLayout(root);
        console.log('Layout aplicado, nodos:', root.descendants().length);
        
        // Crear links
        const links = svg.selectAll(".link")
            .data(root.links())
            .enter()
            .append("path")
            .attr("class", "link")
            .attr("d", d3.linkHorizontal()
                .x(d => d.x + 50)
                .y(d => d.y + 50));
        
        // Crear nodos
        const nodes = svg.selectAll(".node")
            .data(root.descendants())
            .enter()
            .append("g")
            .attr("class", "node")
            .attr("transform", d => `translate(${d.x + 50}, ${d.y + 50})`);
        
        // Círculos para los nodos
        nodes.append("circle")
            .attr("r", 10)
            .attr("fill", "#69b3a2");
        
        // Texto para los nombres
        nodes.append("text")
            .attr("dy", "0.31em")
            .attr("x", d => d.children ? -13 : 13)
            .attr("text-anchor", d => d.children ? "end" : "start")
            .text(d => d.data.name);
        
        console.log('Árbol renderizado');
    </script>
</body>
</html>
