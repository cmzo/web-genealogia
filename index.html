<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matías Clemenzo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/css/styles.css" />
  <script src="./assets/js/path-config.js"></script>
</head>
<body class="home">
  <header class="site-header">
    <div class="header-container">
      <div class="header-brand">
        <h1 class="site-title">Matías Clemenzo</h1>
        <p class="site-subtitle">Genealogía, historias y memoria familiar</p>
      </div>
      <nav class="site-nav">
        <a href="blog.html" class="nav-link">Blog</a>
        <a href="arbol-nuevo.html" class="nav-link">Árbol</a>
        <button class="nav-link contact-link" id="contactBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
          Contacto
        </button>
      </nav>
    </div>
  </header>

  <main class="home">

    <section class="cards" id="cards-container">
      <!-- Las tarjetas se cargarán dinámicamente aquí -->
      <div class="loading-cards">
        <div class="loading-spinner"></div>
        <p>Cargando contenido...</p>
      </div>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Cargar entradas del blog dinámicamente
      async function loadBlogEntries() {
      try {
        const response = await fetch(getDataPath('blog-entries.json'));
        const blogEntries = await response.json();
        
        // Combinar entradas estáticas y dinámicas
        const allCards = [
          // Entradas estáticas (siempre presentes)
          {
            id: 'quien-soy',
            title: '¿Quién soy?',
            description: 'Presentación personal y mapa de la memoria',
            image: getImagePath('cards/quiensoy.webp'),
            url: 'quien-soy.html',
            featured: true
          },
          {
            id: 'arbol',
            title: 'Árbol genealógico',
            description: 'Visualización interactiva de la familia',
            image: './assets/images/cards/arbol.webp',
            url: 'arbol-nuevo.html',
            featured: true
          },
          // Entradas dinámicas del blog
          ...blogEntries.filter(entry => entry.featured).slice(0, 2)
        ];
        
        // Agregar entradas estáticas restantes
        const staticCards = [
          {
            id: 'archivo',
            title: 'Archivo',
            description: 'Fotos, documentos y materiales por persona',
            image: './assets/images/cards/contacto.webp',
            url: 'archivo.html'
          },
          {
            id: 'trama-mexicana',
            title: 'La trama mexicana',
            description: 'Historias, migraciones y vínculos con México',
            image: './assets/images/cards/trama-mexicana.webp',
            url: 'trama-mexicana.html'
          },
          {
            id: 'mapa-clemenzos',
            title: 'Mapa de Clemenzo\'s',
            description: 'Lugares, rutas y recorridos de la familia',
            image: './assets/images/cards/clemenzo-por-el-mundo.webp',
            url: 'mapa-clemenzos.html'
          }
        ];
        
        allCards.push(...staticCards);
        
        renderCards(allCards);
        
      } catch (error) {
        console.warn('Error cargando entradas del blog:', error);
        // Fallback a tarjetas estáticas
        renderStaticCards();
      }
    }
    
    function renderCards(cards) {
      const container = document.getElementById('cards-container');
      container.innerHTML = '';
      
      cards.forEach(card => {
        if (card.isContact) {
          // Tarjeta de contacto con flip
          container.innerHTML += `
            <div class="card flip-card" tabindex="0" role="button" aria-label="Mostrar información de contacto">
              <div class="flip-card-inner">
                <div class="flip-card-front">
                  <figure class="card-media">
                    <img src="${card.image}" alt="${card.title}" width="280" height="380" loading="lazy">
                  </figure>
                  <div class="card-body">
                    <h2 class="card-title">${card.title}</h2>
                    <p class="card-desc">${card.description}</p>
                  </div>
                </div>
                <div class="flip-card-back">
                  <div class="contact-content">
                    <h2 class="contact-title">Contacto</h2>
                    <div class="contact-info">
                      <a href="mailto:cmzo@proton.me" class="contact-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                          <polyline points="22,6 12,13 2,6"/>
                        </svg>
                        cmzo@proton.me
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
        } else {
          // Tarjeta normal
          container.innerHTML += `
            <a href="${card.url}" class="card">
              <figure class="card-media">
                <img src="${card.image}" alt="${card.title}" width="280" height="380" loading="lazy">
              </figure>
              <div class="card-body">
                <h2 class="card-title">${card.title}</h2>
                <p class="card-desc">${card.description}</p>
              </div>
            </a>
          `;
        }
      });
    }
    
    function renderStaticCards() {
      const container = document.getElementById('cards-container');
      container.innerHTML = `
        <a href="quien-soy.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/quiensoy.webp" alt="¿Quién soy?" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">¿Quién soy?</h2>
            <p class="card-desc">Presentación personal y mapa de la memoria</p>
          </div>
        </a>

        <a href="arbol-nuevo.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/arbol.webp" alt="Línea Directa" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">Línea Directa</h2>
            <p class="card-desc">Tu línea genealógica directa desde Francisco hasta tu hijo</p>
          </div>
        </a>

        <a href="arbol-completo.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/arbol.webp" alt="Árbol Completo" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">Árbol Completo</h2>
            <p class="card-desc">Explora toda tu familia con navegación completa e interactiva</p>
          </div>
        </a>

        <a href="arbol-visjs.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/arbol.webp" alt="Árbol Vis.js" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">Árbol Vis.js</h2>
            <p class="card-desc">Versión simple y elegante con Vis.js Network</p>
          </div>
        </a>

                        <a href="arbol-d3-cards.html" class="card">
                  <figure class="card-media">
                    <img src="./assets/images/cards/arbol.webp" alt="Árbol D3 Cards" width="280" height="380" loading="lazy">
                  </figure>
                  <div class="card-body">
                    <h2 class="card-title">Árbol D3 Cards</h2>
                    <p class="card-desc">Versión con tarjetas organizadas usando D3.js</p>
                  </div>
                </a>
                
                <a href="arbol-nuevo.html" class="card">
                  <figure class="card-media">
                    <img src="./assets/images/cards/arbol.webp" alt="Árbol Nuevo" width="280" height="380" loading="lazy">
                  </figure>
                  <div class="card-body">
                    <h2 class="card-title">Árbol Nuevo</h2>
                    <p class="card-desc">Versión completamente nueva y simplificada</p>
                  </div>
                </a>

        <a href="francisco.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/francisco.webp" alt="El misterio de Francisco" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">El misterio de Francisco</h2>
            <p class="card-desc">Investigación histórica y reconstrucción de pistas</p>
          </div>
        </a>

        <a href="trama-mexicana.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/trama-mexicana.webp" alt="La trama mexicana" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">La trama mexicana</h2>
            <p class="card-desc">Historias, migraciones y vínculos con México</p>
          </div>
        </a>

        <a href="mapa-clemenzos.html" class="card">
          <figure class="card-media">
            <img src="./assets/images/cards/clemenzo-por-el-mundo.webp" alt="Mapa de Clemenzo's" width="280" height="380" loading="lazy">
          </figure>
          <div class="card-body">
            <h2 class="card-title">Mapa de Clemenzo's</h2>
            <p class="card-desc">Lugares, rutas y recorridos de la familia</p>
          </div>
        </a>
      `;
    }
    
      // Cargar entradas al cargar la página
      loadBlogEntries();

      // Modal de contacto - Versión robusta para GitHub Pages
      function initContactModal() {
        const contactBtn = document.getElementById('contactBtn');
        const contactModal = document.getElementById('contactModal');
        const closeContactBtn = document.querySelector('.close-contact');

        if (!contactBtn || !contactModal || !closeContactBtn) {
          console.warn('Elementos del modal de contacto no encontrados');
          return;
        }

        // Función para abrir modal
        function openModal() {
          contactModal.style.display = 'flex';
          document.body.style.overflow = 'hidden';
          console.log('Modal de contacto abierto');
        }

        // Función para cerrar modal
        function closeModal() {
          contactModal.style.display = 'none';
          document.body.style.overflow = 'auto';
          console.log('Modal de contacto cerrado');
        }

        // Event listeners
        contactBtn.addEventListener('click', openModal);
        closeContactBtn.addEventListener('click', closeModal);

        // Cerrar al hacer click fuera del modal
        contactModal.addEventListener('click', (e) => {
          if (e.target === contactModal) {
            closeModal();
          }
        });

        // Cerrar con Escape
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && contactModal.style.display === 'flex') {
            closeModal();
          }
        });

        console.log('Modal de contacto inicializado correctamente');
      }

      // Inicializar modal después de que todo esté cargado
      initContactModal();
      
      // Forzar actualización de cache - GitHub Pages
      console.log('Sitio actualizado:', new Date().toISOString());
    });
  </script>

  <!-- Modal de contacto -->
  <div id="contactModal" class="contact-modal">
    <div class="contact-card">
      <div class="contact-header">
        <h2>Contacto</h2>
        <button class="close-contact" aria-label="Cerrar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="contact-body">
        <div class="contact-item">
          <div class="contact-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
          </div>
          <div class="contact-info">
            <h3>Email</h3>
            <a href="mailto:cmzo@proton.me">cmzo@proton.me</a>
          </div>
        </div>
        
        <!-- Aquí puedes agregar más opciones de contacto -->
        <div class="contact-item">
          <div class="contact-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
          </div>
          <div class="contact-info">
            <h3>Teléfono</h3>
            <span>+54 9 11 1234-5678</span>
          </div>
        </div>

        <div class="contact-item">
          <div class="contact-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
            </svg>
          </div>
          <div class="contact-info">
            <h3>Facebook</h3>
            <a href="https://facebook.com/matias.clemenzo" target="_blank" rel="noopener">@matias.clemenzo</a>
          </div>
        </div>

        <div class="contact-item">
          <div class="contact-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
            </svg>
          </div>
          <div class="contact-info">
            <h3>Twitter</h3>
            <a href="https://twitter.com/matiasclemenzo" target="_blank" rel="noopener">@matiasclemenzo</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer" style="background: #ffffff; border-top: 1px solid #e6e7eb; padding: 24px 0; text-align: center; margin-top: 48px;">
    <div class="footer-container" style="max-width: 1040px; margin: 0 auto; padding: 0 20px;">
      <p class="footer-text" style="color: #6b7280; font-size: 14px; font-weight: 500; margin: 0;">Matias Clemenzo 2025</p>
    </div>
  </footer>
</body>
</html>